{% extends 'template.html' %}
{% load static %}
{% block nav %}
{% include 'nav_empreendedor.html' %}
{% endblock %}
{% block css %}
  <link rel="stylesheet" href="{% static 'css/carousel.css' %}">
{% endblock %}
{% block main %}
<div class="container">
    <div class="row  bg-white" style="border-radius: 30px;">
      <div class="col">
        <div class="pt-4 d-flex px-3">
            <h2 style="display: inline;">Processos Digitais {% if is_agente %}<span class="text-secondary">(ADMIN)</span>{% endif %}</h2>                   
              <a href="{% url 'processos_empreendedor:novo_processo' %}" class="btn btn-success ms-auto my-auto">
                <i class="fa-solid fa-plus me-1 "></i> Novo
              </a>
              <button id="openFilter" class="btn btn-secondary ms-2 my-auto">
                <i class="fa-solid fa-filter"></i>            
              </button> 
              <a href="{% url 'empreendedor:consultar_processos' %}" class="btn btn-dark ms-2 my-auto">
                <i class="fa-solid fa-rotate-left"></i>
              </a>                     
            </div>
            <!-- <div class="row">
                <div class="col">
                  {% if messages %}
                    {% for message in messages %}
                      <div class="alert {{ message.tags }}">
                        {{ message }}
                      </div>
                    {% endfor %}
                  {% endif %}
                </div>
              </div> -->
              {% if is_agente %}
            <div class="row px-5 mt-3">
              <div class="col d-flex justify-content-center py-3" style="background-color: rgba(182, 182, 182, 0.404); border-radius: 20px;">
                <div class="my-auto">
                  <span class="ms-4" style="font-size: 16pt;">ÁREA DO AGENTE</span>
                </div>
                <div class="d-flex ms-auto">
                  {% if agente.is_tributario %}
                <a href="{% url 'processos_empreendedor:listar_processos_agente' 'agente-tributario' %}" class="btn btn-light me-1 bg-light">
                  Agente da Sala
                </a>
                {% endif %}                
                {% if agente.is_sanitario%}
                <a href="{% url 'processos_empreendedor:listar_processos_agente' 'agente-sanitario' %}" class="btn btn-light mx-1 bg-light">
                  Agente Sanitário
                </a>
                {% endif %}
                {% if agente.is_ambiental%}
                <a href="{% url 'processos_empreendedor:listar_processos_agente' 'agente-ambiental' %}" class="btn btn-light ms-1 bg-light">
                 Agente Ambiental
                </a>
                {% endif %}
                </div>
                
              </div>
            </div>          
            {% endif%}    
            <div class="row">
                <div class="col px-5 pb-5 d-flex flex-column">
                    <div class="menu mt-3 mb-4">
                        <a href="#">
                            Escolaridade
                        </a>
                        <a href="#" class="ms-3">
                            Profissão
                        </a>
                        <a href="#" class="ms-3">
                            Status
                        </a>
                    </div>
                    <div class="processos">
                        <table class="table mt-4">
                            <thead>
                                <tr>
                                    <th>Nº Protocolo</th>
                                    <th>Status</th>
                                    <th>Tipo</th>
                                    <!-- <th>Solicitante</th> -->
                                    <th class="text-center">Dt. atualização</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                              {% for processo in meus_processos %}
                                <tr>
                                    <td><strong>{{processo.n_protocolo}}</strong></td>
                                    <td class="d-flex text-center"><span class="py-1 px-3 rounded-pill w-100" style="background-color: {% if processo.status == 'nv' %}rgb(124, 183, 235){% elif processo.status == 'ae' %}rgb(235, 137, 124){% elif processo.status == 'ar' %}rgb(228, 235, 124){% elif processo.status == 'aa' %}rgb(235, 176, 124){% elif processo.status == 'bg' %}rgb(124, 235, 124){% elif processo.status == 'cn' %}#000000; color: white{% endif %};">{{processo.get_status_display}}</span></td>
                                    <td style="padding-top: 12px;"><span class="py-1 px-3 rounded-pill w-100" style="{% if processo.tipo_processo.id == 1 %}background-color: rgb(124, 235, 150);{% elif processo.tipo_processo.id == 3 %}background-color: rgb(231, 235, 124);{% else %}background-color: rgb(124, 187, 235);{% endif %}">{{processo.tipo_processo.nome}}</span></td>
                                    <!-- <td><a target="_blank" href="#"><i class="fa-solid fa-user me-2"></i> {{processo.solicitante.first_name}}</a></td> -->
                                    <td class="text-center">{{processo.dt_atualizacao|date:"d/m/y"}}</td>
                                    <td class="text-center"><a href="{% url 'processos_empreendedor:middle_acompanhamento_processo' processo.n_protocolo %}"><i st class="fa-solid fa-folder-open me-2"></i> Visualizar processo</a></td>
                                </tr>
                              {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
      </div>
    </div>
</div>
</div>
<div class="row mx-auto px-5">
  <script>
    document.getElementById('empreendedor_protocolo').classList.add('s-nav-active');

    let openfiltros = false
    function showFiltros(){
        if (openfiltros){      
            document.getElementById('filtros').style.display='none'
            openfiltros=false
        }else{
            document.getElementById('filtros').style.display='flex'
            openfiltros=true
        }
    }

  document.addEventListener("DOMContentLoaded", function() {
    const menuButton = document.getElementById("openMenu");
    const menu = document.querySelector(".menu");

    menuButton.addEventListener("click", function() {
      menu.classList.toggle("menu-open");
    });
  });

  
  </script>
</div>

<style>
    .menu {
  display: none; /* Inicialmente, ocultar o menu */
}

.menu-open {
  display: block; /* Quando a classe "menu-open" é adicionada, mostrar o menu */
  /* Outros estilos para o menu aberto, como posição, cores, etc. */
}
    .border{
        border-color: rgba(146, 146, 146, 0.2) !important;
    }
    #filtros{
        display: none;
    }
</style>

</script>

{% endblock %}
{% block footer %}
{% include 'desenvolve_nf/instagram.html' %}
{% endblock %}